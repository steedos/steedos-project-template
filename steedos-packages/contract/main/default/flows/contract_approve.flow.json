{"name":"合同审批流程","state":"enabled","is_deleted":false,"is_valid":true,"space":"66e0f751ded23f05c63db756","app":"workflow","created":"2024-09-19T06:17:13.772Z","modified":"2024-09-19T06:18:03.970Z","modified_by":"66e0f748ded23f05c63db754","category":"FZjrDwo77ZW4hR9W7","instance_style":"table","company_id":"66e0f751ded23f05c63db756","current":{"_id":"12900811-fdc4-4000-ad1c-4e2defa5","name_forumla":"{name}","form":"12900811-fdc4-4000-ad1c-4e2defa5","_rev":1,"created":"2024-09-19T06:17:13.772Z","modified":"2024-09-19T06:18:03.949Z","fields":[{"name":"合同名称","code":"name","is_wide":false,"is_list_display":false,"is_searchable":false,"is_required":true,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"name","label":"合同名称","type":"text","required":true,"index":true,"searchable":true,"filterable":true,"sort_no":10,"defaultValue":null,"filters":[],"readonly":null,"reference_to":null,"inlineHelpText":null,"group":null,"hidden":false,"visible_on":null,"description":null,"enable_thousands":true},"type":"input","_id":"66ebc1e9bde3d205c54d013a"},{"name":"合同编号","code":"autonumber","is_wide":false,"is_list_display":false,"is_searchable":false,"is_required":false,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"autonumber","autonumber_enable_modify":true,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"searchable":false,"show_as_qr":false,"sort_no":20,"sortable":false,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"合同编号","defaultValue":null,"type":"autonumber","inlineHelpText":null,"formula":"ht-{YY}{MM}{DD}-{000}","displayAs":null,"filters":[],"reference_to":null,"group":null,"visible_on":null,"description":"自动编号类型字段，可以定义编号规则（目前规则为固定字符+年月日+三位流水号）自动生成，也可以用户手动编写合同编号。","required":false},"type":"input","_id":"66ebc1e9bde3d205c54d013b"},{"name":"合同金额","code":"amount","is_wide":false,"is_list_display":false,"is_searchable":true,"is_required":true,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"amount","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"required":true,"searchable":false,"show_as_qr":false,"sort_no":30,"sortable":true,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"合同金额","defaultValue":null,"type":"currency","precision":18,"scale":2,"inlineHelpText":null,"displayAs":null,"group":null,"visible_on":null,"description":"金额类型字段","filters":[],"reference_to":null},"type":"number","digits":2,"_id":"66ebc1e9bde3d205c54d013c"},{"name":"合同状态","code":"status","is_wide":false,"is_list_display":false,"is_searchable":false,"is_required":true,"is_multiselect":false,"default_value":"draft","steedos_field":{"name":"status","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"required":true,"searchable":false,"show_as_qr":false,"sort_no":40,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"合同状态","defaultValue":"draft","type":"select","data_type":"text","options":[{"value":"draft","label":"草稿","color":"#f5a623"},{"label":"进行中","value":"prograss","color":"#7ed321"},{"label":"结束","value":"finish","color":"#9b9b9b"},{"label":"终止作废","value":"discard","color":"#d0021b"}],"inlineHelpText":null,"displayAs":null,"group":null,"visible_on":null,"description":"选择框类型字段，用户可根据合同执行状态，调整选择框对应的选项值。","filters":[],"reference_to":null},"type":"select","options":"草稿:draft\n进行中:prograss\n结束:finish\n终止作废:discard","_id":"66ebc1e9bde3d205c54d013d"},{"name":"已收款金额","code":"yskje","is_wide":false,"is_list_display":false,"is_searchable":true,"is_required":false,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"yskje","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"searchable":false,"show_as_qr":false,"sort_no":50,"sortable":true,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"已收款金额","defaultValue":null,"type":"summary","precision":18,"scale":2,"summary_object":"finance","summary_type":"sum","summary_field":"amount","summary_filters":[{"field":"received","operation":"=","value":"true"}],"displayAs":null,"listName":null,"data_type":"currency","filters":[],"inlineHelpText":null,"group":null,"visible_on":null,"description":"累计汇总类型字段：汇总收款记录子表中，已收款状态记录的所有收款金额。","reference_to":null,"required":false},"type":"number","digits":2,"_id":"66ebc1e9bde3d205c54d013e"},{"name":"未收款金额","code":"wskje","is_wide":false,"is_list_display":false,"is_searchable":true,"is_required":false,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"wskje","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"searchable":false,"show_as_qr":false,"sort_no":60,"sortable":true,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"未收款金额","defaultValue":null,"type":"formula","data_type":"currency","precision":18,"scale":2,"formula_blank_value":"zeroes","formula":"amount-yskje","inlineHelpText":null,"displayAs":null,"listName":null,"group":null,"visible_on":null,"description":"公式类型字段：合同金额-已收款金额","filters":[],"reference_to":null,"required":false},"type":"number","digits":2,"_id":"66ebc1e9bde3d205c54d013f"},{"name":"客户","code":"customer","is_wide":false,"is_list_display":false,"is_searchable":false,"is_required":true,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"customer","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":false,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"required":true,"searchable":false,"show_as_qr":false,"sort_no":70,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"客户","defaultValue":null,"type":"lookup","deleted_lookup_record_behavior":"retain","reference_to":"customer","inlineHelpText":"相关表类型字段，当我们需要描述两个对象之间的关联关系时，可以在其中一个对象中创建一个“相关表关系”类型字段来关联两个对象，比如在创建合同时需要选择客户信息，这种情况就可以在合同对象表上创建一个“客户”相关表类型字段去关联客户信息。","displayAs":null,"auto_fill_mapping":[{"from":"contact","to":"contact"},{"from":"phone","to":"phone"}],"filters":[],"group":null,"visible_on":null,"description":null},"type":"lookup","reference_to":"customer","config":"{\"filters\":[]}","_id":"66ebc1e9bde3d205c54d0140"},{"name":"客户联系人","code":"contact","is_wide":false,"is_list_display":false,"is_searchable":true,"is_required":false,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"contact","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"required":false,"searchable":false,"show_as_qr":false,"sort_no":90,"sortable":true,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"客户联系人","defaultValue":null,"type":"text","displayAs":null,"filters":[],"inlineHelpText":null,"reference_to":null,"group":null,"visible_on":null,"description":"文本联动字段，会根据选择的客户，自动联动出客户预先维护的联系人信息，用户也可手动修改。"},"type":"input","_id":"66ebc1e9bde3d205c54d0141"},{"name":"客户联系电话","code":"phone","is_wide":false,"is_list_display":false,"is_searchable":true,"is_required":false,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"phone","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"required":false,"searchable":false,"show_as_qr":false,"sort_no":100,"sortable":true,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"客户联系电话","defaultValue":null,"type":"text","inlineHelpText":null,"displayAs":null,"group":null,"visible_on":null,"description":"文本联动字段，会根据选择的客户，自动联动出客户预先维护的联系人电话信息，用户也可手动修改。","filters":[],"reference_to":null},"type":"input","_id":"66ebc1e9bde3d205c54d0142"},{"name":"合同开始时间","code":"start","is_wide":false,"is_list_display":false,"is_searchable":true,"is_required":false,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"start","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"required":false,"searchable":false,"show_as_qr":false,"sort_no":110,"sortable":true,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"合同开始时间","defaultValue":null,"type":"date","inlineHelpText":null,"displayAs":null,"group":null,"visible_on":null,"filters":[],"reference_to":null},"type":"date","_id":"66ebc1e9bde3d205c54d0143"},{"name":"预计结束时间","code":"end","is_wide":false,"is_list_display":false,"is_searchable":true,"is_required":false,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"end","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":false,"multiple":false,"primary":false,"readonly":false,"required":false,"searchable":false,"show_as_qr":false,"sort_no":120,"sortable":true,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"预计结束时间","defaultValue":null,"type":"date","displayAs":null,"group":null,"visible_on":null},"type":"date","_id":"66ebc1e9bde3d205c54d0144"},{"name":"合同说明","code":"remark","is_wide":true,"is_list_display":false,"is_searchable":false,"is_required":false,"is_multiselect":false,"default_value":null,"steedos_field":{"name":"remark","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":true,"multiple":false,"primary":false,"readonly":false,"required":false,"searchable":false,"show_as_qr":false,"sort_no":130,"sortable":false,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"合同说明","defaultValue":null,"type":"textarea","inlineHelpText":null,"rows":2,"displayAs":null,"group":null,"visible_on":null,"filters":[],"reference_to":null},"type":"input","is_textarea":true,"_id":"66ebc1e9bde3d205c54d0145"},{"name":"合同附件","code":"attach","is_wide":true,"is_list_display":false,"is_searchable":false,"is_required":false,"is_multiselect":true,"default_value":null,"steedos_field":{"name":"attach","autonumber_enable_modify":false,"coordinatesType":"bd09","create":true,"enable_enhanced_lookup":true,"enable_thousands":true,"filterable":false,"generated":false,"hidden":false,"index":false,"is_name":false,"is_wide":true,"multiple":true,"primary":false,"readonly":false,"required":false,"searchable":false,"show_as_qr":false,"sort_no":140,"static":false,"unique":false,"write_requires_master_read":false,"locked":false,"label":"合同附件","defaultValue":null,"type":"file","inlineHelpText":null,"displayAs":null,"group":null,"visible_on":null,"description":"附件类型字段，可上传多个合同文件","filters":[],"reference_to":null},"type":"file","_id":"66ebc1e9bde3d205c54d0146"}],"modified_by":"66e0f748ded23f05c63db754","start_date":"2024-09-19T06:18:03.949Z"},"historys":[],"category_name":"办公","instance_number_rules":[],"flows":[{"_id":"5Cirtn5MZJjP6HooD","space":"66e0f751ded23f05c63db756","form":"12900811-fdc4-4000-ad1c-4e2defa5","name_formula":"","code_formula":"","is_valid":true,"flowtype":"new","state":"enabled","description":null,"help_text":null,"error_message":"","current_no":4,"is_deleted":false,"created":"2024-09-19T06:17:13.764Z","created_by":"66e0f748ded23f05c63db754","modified":"2024-09-20T07:30:15.105Z","modified_by":"66e0f748ded23f05c63db754","name":"合同审批流程","app":"workflow","category":"FZjrDwo77ZW4hR9W7","company_id":"66e0f751ded23f05c63db756","object_name":"contract","instance_fields":[{"name":"name","label":"合同名称","required":true},{"name":"autonumber","label":"合同编号"},{"name":"amount","label":"合同金额","required":true},{"name":"status","label":"合同状态","required":true},{"name":"yskje","label":"已收款金额"},{"name":"wskje","label":"未收款金额"},{"name":"customer","label":"客户","required":true},{"name":"contact","label":"客户联系人","required":false},{"name":"phone","label":"客户联系电话","required":false},{"name":"start","label":"合同开始时间","required":false},{"name":"end","label":"预计结束时间","required":false},{"name":"remark","label":"合同说明","required":false},{"name":"attach","label":"合同附件","required":false}],"instance_table_fields":[],"perms":{"orgs_can_add":["66e0f751ded23f05c63db756"],"_id":"kbEajCaHQb8CSG6bv"},"current":{"_id":"qPy6Kyut5NfXvcK3g","steps":[{"name":"开始","step_type":"start","deal_type":"","description":"","posx":361.75,"posy":446,"timeout_hours":168,"approver_users":[],"approver_orgs":[],"approver_user_field":"","approver_org_field":"","approver_roles":[],"approver_step":"","lines":[{"name":"","state":"submitted","to_step":"82e58eb1-d625-4e28-90ec-d2926d86d430","description":"","timeout_line":false,"_id":"f8FzY4toc9RFqH7wm"}],"permissions":{"__form":"editable","name":"editable","autonumber":"editable","amount":"editable","status":"editable","yskje":"editable","wskje":"editable","customer":"editable","contact":"editable","phone":"editable","start":"editable","end":"editable","remark":"editable","attach":"editable"},"can_edit_main_attach":false,"can_edit_normal_attach":true,"always_enter_step":true,"_id":"wYcA3xH54RitAtAYJ","fields_modifiable":[],"approver_roles_name":[],"approver_roles_api_name":[],"approver_hr_roles_name":[],"approver_hr_roles_api_name":[]},{"name":"结束","step_type":"end","deal_type":"","description":"","posx":1143.25,"posy":446,"approver_users":[],"approver_orgs":[],"approver_user_field":"","approver_org_field":"","approver_roles":[],"approver_step":"","permissions":{},"always_enter_step":true,"_id":"hzN6Szv9gSijfykz7","fields_modifiable":[],"approver_roles_name":[],"approver_roles_api_name":[],"approver_hr_roles_name":[],"approver_hr_roles_api_name":[]},{"name":"领导审批","step_type":"sign","deal_type":"pickupAtRuntime","description":"","posx":687,"posy":438,"timeout_hours":168,"approver_users":[],"approver_orgs":[],"approver_user_field":"","approver_org_field":"","approver_roles":[],"approver_hr_roles":[],"approver_step":"","lines":[{"name":"","state":"approved","to_step":"1e730c5c-025f-40dc-b5c9-b5027a1d383b","description":"","timeout_line":false}],"permissions":{},"disableCC":false,"allowDistribute":false,"can_edit_main_attach":false,"can_edit_normal_attach":true,"cc_must_finished":false,"cc_alert":false,"allow_pick_approve_users":false,"allow_skip":false,"cc_has_edit_permission":false,"always_enter_step":true,"enter_step_condition":"","_id":"82e58eb1-d625-4e28-90ec-d2926d86d430","fields_modifiable":[],"approver_roles_name":[],"approver_roles_api_name":[],"approver_hr_roles_name":[],"approver_hr_roles_api_name":[]},{"name":"申请人处理","step_type":"submit","deal_type":"pickupAtRuntime","description":"","posx":934,"posy":439,"timeout_hours":168,"approver_users":[],"approver_orgs":[],"approver_user_field":"","approver_org_field":"","approver_roles":[],"approver_hr_roles":[],"approver_step":"","lines":[{"name":"","state":"submitted","to_step":"hzN6Szv9gSijfykz7","description":"","timeout_line":false}],"permissions":{},"disableCC":false,"allowDistribute":false,"can_edit_main_attach":false,"can_edit_normal_attach":true,"cc_must_finished":false,"cc_alert":false,"allow_pick_approve_users":false,"allow_skip":false,"cc_has_edit_permission":false,"always_enter_step":true,"enter_step_condition":"","_id":"1e730c5c-025f-40dc-b5c9-b5027a1d383b","fields_modifiable":[],"approver_roles_name":[],"approver_roles_api_name":[],"approver_hr_roles_name":[],"approver_hr_roles_api_name":[]}],"_rev":1,"flow":"5Cirtn5MZJjP6HooD","form_version":"12900811-fdc4-4000-ad1c-4e2defa5","created":"2024-09-19T06:17:13.764Z","created_by":"66e0f748ded23f05c63db754","modified":"2024-09-19T06:18:03.949Z","modified_by":"66e0f748ded23f05c63db754","start_date":"2024-09-19T06:18:03.949Z"},"company_ids":["66e0f751ded23f05c63db756"],"forbid_initiate_instance":true,"api_name":"contract_approve","historys":[],"object_workflows":[{"_id":"cq2pFZcHFQrp4fCJM","name":"合同审批流程-合同","object_name":"contract","flow_id":"5Cirtn5MZJjP6HooD","sync_attachment":"lastest","sync_type":"every_step","sync_direction":"both","field_map_back":[{"object_field":"name","workflow_field":"name"},{"object_field":"autonumber","workflow_field":"autonumber"},{"object_field":"amount","workflow_field":"amount"},{"object_field":"status","workflow_field":"status"},{"object_field":"yskje","workflow_field":"yskje"},{"object_field":"wskje","workflow_field":"wskje"},{"object_field":"customer","workflow_field":"customer"},{"object_field":"contact","workflow_field":"contact"},{"object_field":"phone","workflow_field":"phone"},{"object_field":"start","workflow_field":"start"},{"object_field":"end","workflow_field":"end"},{"object_field":"remark","workflow_field":"remark"},{"object_field":"attach","workflow_field":"attach"}],"field_map":[{"object_field":"name","workflow_field":"name"},{"object_field":"autonumber","workflow_field":"autonumber"},{"object_field":"amount","workflow_field":"amount"},{"object_field":"status","workflow_field":"status"},{"object_field":"yskje","workflow_field":"yskje"},{"object_field":"wskje","workflow_field":"wskje"},{"object_field":"customer","workflow_field":"customer"},{"object_field":"contact","workflow_field":"contact"},{"object_field":"phone","workflow_field":"phone"},{"object_field":"start","workflow_field":"start"},{"object_field":"end","workflow_field":"end"},{"object_field":"remark","workflow_field":"remark"},{"object_field":"attach","workflow_field":"attach"}],"lock_record_after_approval":true}]}],"api_name":"contract_approve"}